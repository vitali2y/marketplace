//-
//- Marketplace Layout
//-

doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    title Marketplace PoC
    meta(name='description', content='My Marketplace')
    meta(name='keywords', content='marketplace, platform, p2p, decentralized')
    link(href='https://fonts.googleapis.com/css?family=Roboto+Slab', rel='stylesheet')
    link(rel='stylesheet', href='/css/vendor.css')
    link(rel='stylesheet', href='/css/app.css')

  body
    .container

      //- modal popups
      //- user popup
      #modal-user.modal(v-bind:class="{ active: isActive }")
        a.modal-overlay(href='#', v-on:click='close()', aria-label='Close')
        .modal-container(role='document')

          .modal-header
            a.btn.btn-clear.float-right(href='#', v-on:click='close()', aria-label='Close')
            .modal-title.h5 My Info

          .modal-body
            .content
              form
                .form-group
                  label.form-label(for='modal-user-name') My Name
                  input#modal-user-name.form-input(type='text', v-model='name', disabled)
                .form-group
                  label.form-label(for='modal-user-email') My Email
                  input#modal-user-email.form-input(type='text', v-model='email', disabled)
                .form-group
                  label.form-label(for='modal-user-address') My Address
                  input#modal-user-address.form-input(type='text', v-model='address', disabled)
                .form-group
                  .columns
                    .column.col-6
                      label.form-label(for='modal-user-mode') My Status
                      input#modal-user-mode.form-input(type='text', v-model='mode', disabled)
                    .column.col-6
                      label.form-label(for='modal-user-balance') My Balance
                      input#modal-user-balance.form-input(type='text', v-model='balance', disabled)

          .modal-footer
            a.btn.btn-primary(href='#', v-on:click='close()', aria-label='Close') Close


      //- purchase popup
      #modal-buy.modal(v-bind:class="{ active: isActive }")
        a.modal-overlay(href='#', v-on:click='close()', aria-label='Close')
        .modal-container(role='document')

          .modal-header
            a.btn.btn-clear.float-right(href='#', v-on:click='close()', aria-label='Close')
            .modal-title.h5 Purchase Item

          .modal-body
            .content
              form
                .form-group
                  label.form-label(for='modal-buy-name') File Name
                  input#modal-buy-name.form-input(v-model='name', type='text', disabled)

                .form-group
                  label.form-label(for='modal-buy-balance') Price
                  .has-icon-right
                    input#modal-buy-balance.form-input(v-model='price', type='text', disabled)
                    i.form-icon.icon.icon-check(style='color: green')

                .form-group
                  label.form-label(for='modal-buy-seller') Seller Address
                  .has-icon-right
                    input#modal-buy-seller.form-input(v-model='seller', type='text', disabled)
                    i.form-icon.icon.icon-emoji(style='color: green')

                .form-group
                  label.form-switch
                    input(type='checkbox', value='email', v-model='checked')
                    i.form-icon
                    | To send file to my email address

                .form-group
                  label.form-switch
                    input(type='checkbox', value='upload')
                    i.form-icon
                    | To upload file to my online account

                .form-group
                  label.form-switch
                    input(type='checkbox', value='witness')
                    i.form-icon
                    | Witness Mode

          .modal-footer
            a.btn.btn-error(href='#', v-on:click='buy()', aria-label='Purchase') Purchase
            a.btn.btn-primary(href='#', v-on:click='close()', aria-label='Cancel') Cancel


      //- TBD popup
      #modal-tbd.modal(v-bind:class="{ active: isActive }")
        a.modal-overlay(href='#', v-on:click='close()', aria-label='Close')
        .modal-container(role='document')

          .modal-header
            a.btn.btn-clear.float-right(href='#', v-on:click='close()', aria-label='Close')
            .modal-title.h5 {{ msg }}

          .modal-body
            .content
              | TBD

          .modal-footer
            a.btn.btn-primary(href='#', v-on:click='close()', aria-label='Close') Close


      //- top navigation bar
      #navbar.columns
        .column
          header.navbar
            .navbar-section.hide-sm
              a(v-on:click="app('home')" style='margin: 20px')
                icon(name='bank', scale='3', label='My Marketplace')
            .navbar-section.hide-sm
              a(v-on:click="modal('user')") My Info
              | &nbsp;|&nbsp;
              a(v-on:click="app('tx')") My Transactions
              | &nbsp;|&nbsp;
              a(v-on:click="app('search')") Search
              | &nbsp;&nbsp;


      //- main area
      .columns
        //- left column (hardcoded list of stores)
        #app-stores.column.col-3
          dl
            dd(v-for='(item, index) in stores', :id="item.id")
              a(:href="'?' + item.id", @click.prevent='storeSelected')
                icon(name='bank', :label="item.name")
                | &nbsp;{{ item.name }}&nbsp;
                sup(v-if='item.stars > 0')
                  icon(name='star', :label="item.name")
                  | {{ item.stars }}


        //- right column
        //- home app
        #app-home.app.column.col-9(v-bind:class="{ inactive: !isActive }")
          h2 Marketplace Proof-of-Concept
          ul
            li
              | List of registered online stores on the left side - select any in order to select and buy digital goods,
            li
              b
                | My Info
              | &nbsp;popup provides general information about currently logged in user (buyer), such as amount of available coins, etc,
            li
              b
                | My Transactions
              | &nbsp;contains list of already successfully executed transactions,
            li
              b
                | Search
              | &nbsp;might be used for searching the product by full or partial file name, file category, #hashtag, etc.


        //- my transactions app
        #app-tx.app.column.col-9(v-bind:class="{ inactive: !isActive }")
          h6
            b
              | My Transactions

          table.table.table-striped.table-hover
            thead
              tr
                th Id
                th Created
                th Content
            tbody
              tr(v-for='(item, index) in txs', :id="item.id")
                td(:title="item.id")
                  .overme(style="width: 350px")
                    | {{ item.id }}
                td
                  | {{ item.ts }}
                td.overme(:title="item.all")
                  .overme(style="width: 550px")
                    | {{ item.all }}


        //- search app
        #app-search.app.column.col-9(v-bind:class="{ inactive: !isActive }")
          .market-title.gradient-shadow(title='Marketplace Search')
            div Marketplace Search

          .input-group(style="padding-top: 10px")
            span.input-group-addon Search for:
            input.form-input(style='width: unset', type='text', placeholder='type full or partial file name or #hashtag')
            button.btn.btn-primary.input-group-btn(@click="$bus.$emit('open-modal-tbd', 'Search')") &nbsp;Go!&nbsp;

          .form-group
            label.form-label Also, by file category too:
            label.form-radio
              input(type='radio', name='file-type', checked='')
              i.form-icon
              | All
            label.form-radio
              input(type='radio', name='file-type')
              i.form-icon
              | Images
            label.form-radio
              input(type='radio', name='file-type')
              i.form-icon
              | Videos
            label.form-radio
              input(type='radio', name='file-type')
              i.form-icon
              | Audios
            label.form-radio
              input(type='radio', name='file-type')
              i.form-icon
              | Archives (ZIP, etc)


        //- files app
        #app-files.app.column.col-9(v-bind:class="{ inactive: !isActive }")
          h6
            b
              | {{ currentStoreName }}
            | &nbsp;&nbsp;
            a(href='#', @click.prevent="storeComments()", title="Others About Store")
              icon(name='commenting', scale='2', label="Others About Store")
            | &nbsp;&nbsp;
            a(href='#', @click.prevent="storeRating()", title='Store Rating')
              icon(name='star', scale='2', label='Store Rating')

          table.table.table-striped.table-hover
            thead
              tr
                th File Name
                th File Type
                th Created
                th Size
                th Price
                th Actions
            tbody
              tr(v-for='(item, index) in files', :id="item.id")
                td
                  | {{ item.name }}
                td
                  a(href='#', :title='item.mime')
                    icon(:name='item.type', scale='2', :label='item.mime')
                td
                  | {{ item.ts }}
                td
                  | {{ item.size }}
                td
                  | {{ item.price }}
                td
                  .popover.popover-left
                    button.btn.btn-link
                      icon(name='bars', scale='2', label='Actions')
                    .popover-container
                      .card
                        .card-body
                          | &nbsp;&nbsp;
                          a(href='#', @click.prevent="fileBuy", title='Buy')
                            icon(name='shopping-cart', scale='2', label='Buy')
                          | &nbsp;&nbsp;
                          a(href='#', @click.prevent="fileComments", title="Others About Product")
                            icon(name='commenting', scale='2', label="Others About Product")
                          | &nbsp;&nbsp;
                          a(href='#', @click.prevent="fileRating", title='Product Rating')
                            icon(name='star', scale='2', label='Product Rating')
                          | &nbsp;&nbsp;
                          a(href='#', @click.prevent="filePreview", title='Product Preview')
                            icon(name='eye', scale='2', label='Product Preview')
                          | &nbsp;&nbsp;


    //- toast notifications
    #toast.toast(v-bind:class="{ inactive: !isActive, 'toast-success': isSuccess, 'toast-error': !isSuccess }")
      button.btn.btn-clear.float-right
      span
        | {{ msg }}


    script(src='/socket.io/socket.io.js')
    script(type='text/javascript', src='/js/vendor.js')
    script(type='text/javascript', src='/js/app.js')
    script.
      document.addEventListener("DOMContentLoaded", function(event) { require('index') })
